<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../imgs/logo.png" type="image/x-icon">
    <link href="https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">
    <link rel="stylesheet" href="../index.css">
    <link rel="stylesheet" href="producto.css">
    <title>Lente Oftálmico Gucci GG0027O Havana</title>
</head>
<header>
    <img class="logo" src="/landing_crystal_eyes/imgs/logo.png" alt="Logo">
    <button id="abrir" class="abrir-menu"><i class="bi bi-list"></i></button>
    <nav class="nav" id="nav">
        <button class="cerrar-menu" id="cerrar"><i class="bi bi-x"></i></button>
        <ul class="nav-list">
            <li><a href="/landing_crystal_eyes/index.html">Inicio</a></li>
            <li class="dropdown">
                <a href="#">Productos</a>
                <ul class="dropdown-menu">
                    <li><a href="/landing_crystal_eyes/productos/todos.html">Todos los productos</a></li>
                    <li><a href="/landing_crystal_eyes/productos/oftalmico.html">Lentes oftálmicos</a></li>
                    <li><a href="/landing_crystal_eyes/productos/lentescontacto.html">Lentes de contacto</a></li>
                    <li><a href="/landing_crystal_eyes/productos/lentesol.html">Lentes de sol</a></li>
                </ul>
            </li>
            <li><a href="/landing_crystal_eyes/contacto/contacto.html">Contacto</a></li>
            <div class="search-form-container">
                <form class="search-form" action="search.php" method="GET">
                    <input type="text" name="query" placeholder="Buscar...">
                    <button type="submit"><i class="bi bi-search"></i></button>
                </form>
            </div>
            <li><a href="/landing_crystal_eyes/perfil/perfil.html"><i class="bi bi-person-square" style="font-size: 24px"></i></a></li>
            <li><a href="/landing_crystal_eyes/listadeseos/listadeseos.html"><i class="bi bi-box2-heart" style="font-size: 24px"></i></a></li>
            <li><a href="/landing_crystal_eyes/carrito/carrito.html"><i class="bi bi-cart3" style="font-size: 24px"></i></a></li>
            <li><a href="/landing_crystal_eyes/loginregister/login.html"><button class="icon-button login-button"><i
                            class="bi bi-person-fill"></i><span class="login-text">Iniciar
                            sesión</span></button></a></li>
            <li><a href="/landing_crystal_eyes/loginregister/register.html"><button class="icon-button register-button"><i
                            class="bi bi-person-plus-fill"></i><span
                            class="register-text">Registrarse</span></button></a></li>
        </ul>
    </nav>
</header>

<body>
    <div id="name" class="name"></div>
    <div class="container desktop-view">
        <div class="img_container">
            <img src="../Imgs/L7-1.png" alt="" class="main_img">
        </div>
        <div id="detalle-productoN" class="detalle-productoN"></div>

    </div>
    <div class="thumbnail_container">
        <img class="thumbnail active" src="../Imgs/L7-1.png" alt="">
        <img class="thumbnail" src="../Imgs/L7-2.png" alt="">
        <img class="thumbnail" src="../Imgs/L7-3.png" alt="">
    </div>
    <div id="detalle-productoR" class="detalle-productoR"></div>

    <br><br><br><br><br><!--Aquí va a ir las reseñas, footer, etc.-->

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const main_img = document.querySelector('.main_img')
            const thumbnails = document.querySelectorAll('.thumbnail')


            thumbnails.forEach(thumb => {
                thumb.addEventListener('click', function () {
                    const active = document.querySelector('.active')
                    active.classList.remove('active')
                    thumb.classList.add('active')
                    main_img.src = thumb.src
                })
            })

            const detalleProductoNDiv = document.getElementById('detalle-productoN');
            const detalleProductoRDiv = document.getElementById('detalle-productoR');
            const nameDiv = document.getElementById('name');

            fetch('http://localhost/landing_crystal_eyes/jsons/productos.json')
                .then(response => response.json())
                .then(data => {
                    const productoId1 = data.find(producto => producto.id === 7);

                    if (productoId1) {
                        //Nombre en responsive
                        nameDiv.classList.add('productoID1');
                        nameDiv.innerHTML = `
                        <h2>${productoId1.nombre}</h2>       
                        `;

                        //Card producto pantalla web
                        detalleProductoNDiv.classList.add('productoID1');
                        detalleProductoNDiv.innerHTML = `
                        <div id="detalle-producto" class="productoID1">
                            <div class="info-producto">
                                <h2>${productoId1.nombre}</h2>
                                <p class="precio">$${productoId1.precio}</p>
                                <p class="descripcion">${productoId1.descripcion_larga}</p><br>
                                <button class="btn-comprar" id="btn-agregar-carrito" onclick="agregarACarrito()" >Agregar al carrito</button><br><br>
                                <button class="btn-comprar" id="btn-agregar-lista-deseos">Agregar a lista de deseos</button>
                            </div>
                        </div>
                        `;

                        //Card producto responsive
                        detalleProductoRDiv.classList.add('productoID1');
                        detalleProductoRDiv.innerHTML = `
                        <div id="detalle-producto" class="productoID1">
                            <div class="info-producto">
                                <p class="precio">$${productoId1.precio}</p>
                                <p>${productoId1.descripcion_larga}</p><br>
                                <button class="btn-comprar" id="btn-agregar-carrito" onclick="agregarACarrito()">Agregar al carrito</button><br><br>
                                <button class="btn-comprar" id="btn-agregar-lista-deseos">Agregar a lista de deseos</button>
                            </div>
                        </div>
                        `;

                        document.getElementById('btn-agregar-lista-deseos').addEventListener('click', function () {
                            let listaDeseos = JSON.parse(localStorage.getItem('listaDeseos')) || [];

                            const productoExistente = listaDeseos.find(producto => producto.id === productoId1.id);

                            if (!productoExistente) {

                                listaDeseos.push(productoId1);
                                localStorage.setItem('listaDeseos', JSON.stringify(listaDeseos));
                                alert('Producto agregado a lista de deseos');

                                this.classList.add('disabled-button');
                            } else {
                                window.location.href = "/landing_crystal_eyes/listadeseos/listadeseos.html";
                            }
                        });

                    } else {
                        detalleProductoDiv.innerHTML = `<p>No se encontró información para este producto.</p>`;
                    }
                })
                .catch(error => {
                    console.error('Error al cargar los datos:', error);
                    detalleProductoDiv.innerHTML = `<p>Error al cargar los datos del producto.</p>`;
                });

        });


    </script>

    <script>
        function agregarACarrito() {
            window.location.href = "/landing_crystal_eyes/carrito/carrito.html";
        }
    </script>

    <script src="../script.js"></script>

    <section id="comentarios">
        <div id="lista-comentarios">
            <!-- Aquí se mostrarán los comentarios -->
        </div>
        <h2 class="reviews">Reseñas</h2>
        <h4 class="añadir-comentarios">Agregar comentario</h4><br><br>
        <form id="formulario-comentario">
            <div>
                <label for="nombre">Nombre de usuario:</label>
                <input type="text" id="nombre" name="nombre" required>
            </div>
            <div class="rating">

            </div>
            <div>
                <label for="comentario">Comentario:</label>
                <textarea id="comentario" name="comentario" required></textarea>
            </div>

            <button type="submit">Agregar Comentario</button>
        </form>
    </section>

    <script>
        // Generar un identificador único para este producto
        var productId = "producto7";

        // Generar una clave única para este producto en el almacenamiento local
        var comentariosKey = "comentarios_" + productId;

        document.getElementById("formulario-comentario").addEventListener("submit", function (event) {
            event.preventDefault();

            var nombre = document.getElementById("nombre").value;
            var comentario = document.getElementById("comentario").value;

            var nuevoComentario = {
                nombre: nombre,
                comentario: comentario
            };

            var comentariosGuardados = localStorage.getItem(comentariosKey);

            var comentarios = comentariosGuardados ? JSON.parse(comentariosGuardados) : [];

            comentarios.push(nuevoComentario);

            localStorage.setItem(comentariosKey, JSON.stringify(comentarios));

            document.getElementById("nombre").value = "";
            document.getElementById("comentario").value = "";

            mostrarComentarios();
        });

        function mostrarComentarios() {
            var comentariosGuardados = localStorage.getItem(comentariosKey);
            var listaComentarios = document.getElementById("lista-comentarios");

            listaComentarios.innerHTML = "";

            if (comentariosGuardados) {
                var comentarios = JSON.parse(comentariosGuardados);
                comentarios.forEach(function (comentario) {
                    var rutaImagenPerfil = "/landing_crystal_eyes/imgs/perfil.jpg";
                    var comentarioHTML = `
                        <div class="comentario">
                            <div style="display: flex; align-items: center;"> <!-- Contenedor para la foto y el nombre -->
                                <img src="${rutaImagenPerfil}" class="foto-perfil" style="width: 60px; height: 60px; margin-right: 10px;"> <!-- Foto con margen derecho -->
                                <strong>${comentario.nombre}</strong> <!-- Nombre del usuario -->
                            </div>
                            <div class="contenido-comentario">
                                <br> <p>${comentario.comentario}</p> <!-- Comentario en un nuevo párrafo -->
                            </div>
                        </div>`;
                    listaComentarios.innerHTML += comentarioHTML;
                });
            }
        }

        mostrarComentarios();
    </script>




</body>

<footer>
    <div class="acerca-de">
        <h3>Acerca de nosotros</h3>
        <p>Somos Crystal Eyes, una empresa apasionada por la visión y el estilo. En Crystal Eyes, entendemos la
            importancia de unos buenos lentes no solo para corregir la visión, sino también para realzar tu estilo
            único.</p>
    </div>
    <div class="redes-sociales">
        <i class='bx bxl-facebook'></i>
        <a class="links" href="https://www.facebook.com/profile.php?id=61558525312465&mibextid=kFxxJD">Facebook</a>
        <i class='bx bxl-instagram'></i>
        <a class="links" href="https://www.instagram.com/landing_crystal_eyesoficial/">Instagram</a>
    </div>
    <div class="acerca-de">
        <p>©2024 Crystal Eyes. Todos los derechos reservados.</p>
    </div>
</footer>

</html>